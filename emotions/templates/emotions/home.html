{% extends "base_home.html" %}
{% load static %}
<head>
  {% block head %}
  <title>Project M</title>
  <link rel="icon" type="image/png" href="{% static "img/m-favicon.png" %}" />
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="cache-control" content="max-age=0" />
  <meta http-equiv="cache-control" content="no-cache" />
  <meta http-equiv="expires" content="0" />
  <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
  <meta http-equiv="pragma" content="no-cache" />
  <link rel="stylesheet" href="{% static "bootstrap-4.3.1/css/bootstrap.min.css" %}"/>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
  <script "{% static "bootstrap-4.3.1/js/bootstrap.min.js" %}"></script>
  <script type="text/javascript" src="{% static "js/homepage.js" %}"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="{% static "css/navbar.css"%}"/>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

  <!-- Styling for the the interaction page -->
  <style>
  html, body {
    max-width: 100%;
    overflow-x: hidden;
    {% comment %} overflow-y: hidden; {% endcomment %}
    {% comment %} overflow-y: hidden; {% endcomment %}
}
    .column {float: left;}
    .left {width: 44%;}
    .right {width: 56%;}
    .row:after {content: ""; display: table; clear: both;}
    @font-face {
      font-family: Open Sans;
      src: url(static/img/fonts/OpenSans-Regular.ttf);
    }


  #pop{
    position:absolute;
    top:50%;
    left:50%;
    transform: translate(-50%, -50%);
  }
  #clos_button {
    top: 0%;
    right:0%;
    position:absolute;
    border: white 1px solid;
    background-color:white;
    padding-right: 10px;
    color: #828282;
    font-weight:300;
    }
    </style>
{% endblock %}
</head>

{% block content %}

<nav class="navbar navbar-expand-md navbar-fixed-top navbar-toggleable-sm navbar-inverse sticky-top" style="background-color: #00a69c;">
  <div>
    <a class="navbar-brand" href="http://www.ipmdinc.com">
      <img src="{% static "img/m-logow.png"%}" alt="Logo" style="width:200px;">
    </a>
  </div>
   
  <div class="navbar-nav ml-auto">
    <ul class="navbar-nav mr-auto">
        <div class="collapse navbar-collapse">
        <li class="nav-item" style="padding-right: 10px; 
        color: white;  
        font-family: 'Open Sans'; 
        font-size: 2.5rem;
        font-weight: 50;
        margin-top: 6px;"> <h5>Account: {{ request.user.username }}</h5></li>
        </div>

        <li class="nav-item"><form class="logout-link" action="{% url 'accounts:logout' %}" method="post"></li>
        {% csrf_token %}
        <li class="nav-item">
        <button type="submit" style="border: 1px solid #FFFFFF;
        box-sizing: border-box;
        border-radius: 5px;
        background-color:#00A69C;
        font-family: Open Sans;
        width: 100px;
        height: 35px;
        font-style: normal;
        font-weight: bold;
        font-size: 14px;
        line-height: 40px;
        align-items: center;
        text-align: center;
        line-height: 19px;
        color: white;
        margin-left: 20px;"> <b>Logout</b></button>
        </form>
        </li>
    </ul>
  </div>
</nav>
{% if firstTime %}  <div id="pop" class = "row justify-content-center" style="height: 550px; width: 800px; border: 2px solid #CCCCCC; background: #FFFFFF; border-radius: 5px; z-index: 4">
    <div style = "text-align:center;" class = "row justify-content-center" >
      <div style =" color: #4F4F4F; 
      padding-top:5%;
      margin-bottom:-30px;
      font-size: 24px; 
      font-weight: bold; 
      "> M image guidelines </div>
      <div style ="padding: 4%; 
      padding-right:12%;
      padding-left:12%;
      font-size: 18px; 
      width:100%;
      margin-bottom:-80px;
      color: #4F4F4F;
      ">Upload a photo of <a style="font-weight:bold;">a person</a> with their <a style="font-weight:bold;">face centered</a>. <a style="color: #E10078;">The face must fill at least 70% of the image.</a> The file must be under 2MB and in JPG or PNG format.</div>
    </div>
    <div id="guides" style="display: flex;padding: 8%;">

      <div style ="width:364.96px; height: 364.96px;float:left; padding-left:4%; ">
        <img src="{% static "img/incorrect.png" %}"> 
      </div>


      <div style ="width:364.96px; height: 364.96px; float:left;padding-left:4%;">
        <img src="{% static "img/correct.png" %}"> 
      </div>


    </div>
    <button id="clos_button">x</button>
  </div>
{% endif %}

    <!--Start of FrontPage (REMOVED FROM VIEW)
    <div id = "FrontPage" 
    class="container-fluid" 
    style = "
    background-color: white; 
    width: 85vw; 
    max-width: 1280px; 
    text-align: center;">
    <h1 class="container-fluid" 
      style= "
      color:#E10078; 
      text-align: center; 
      padding-top: 10vh;"> 
      <img src="static/img/m_frontlogo.png" style = "width: 70vw; height: auto; max-width: 500px; max-height: 85px;">
    </h1>
    <h4 class="container-fluid" 
      style= "
      color:#494C53; 
      font-family: 'Open Sans'; 
      font-size: 2.5rem;
      font-weight: 130;
      padding-top: 4vh;">
      <b>Recognising Emotions Through <br> Hidden & Micro-Facial Expressions</b></h4>
    </div>
    <div class="toTestPage"></div>
      <a href="#explore"  style="color: #494C53; text-align:center; text-decoration: none;">
        </h2>
        <h2 class="container-fluid"
        style="
        text-align: center;
        margin-top: 10vh;
        margin-bottom: 0vh;
        "> 
          <img src="static/img/testbutton.png" width=420px height=126.7px
          style = "
          border: 3px solid #E10078;
          border-radius: 3px;
          box-sizing: border-box;"> 
        </h2>
        <br><br><br><br><br>
        </a>
    </div>
    -->

  

    <!--Start of Interaction-->

    <div style = "text-align: right; position: fixed; right: 0; z-index:5">
      <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
        <input type="hidden" name="cmd" value="_s-xclick" />
        <input type="hidden" name="hosted_button_id" value="L28KJ8ATCQJ84" />
        <button style="text-align: center; color: white; font-size: 18px; font-family: 'Open Sans', sans-serif; height: 40px; width: 128px; background: #E10078;
        border: 1px solid #FFFFFF;
        box-sizing: border-box;
        border-radius: 5px;
        margin-right: -5px;
        margin-top: 30px;
        "> Donate </button>
      </form>
    </div>

    <div id = "Interaction" 
    class= "container-fluid"
    style = "width: 85vw;
    margin-top: 0vh;">

      <div id="explore">
        <h2 class="container-fluid"
        style="
        text-align: center;
        font-size: 50px;
        font-family: Open Sans;
        color: rgba(0, 0, 0, 0.7);
        margin-bottom: 50px;
        ">
          <img src="static/img/exploreM.png" width=350px height=81.585px>
        </h2>
      </div>


      <div class="row">


        <div class="col-md-4 col-xs-6 col-sm-push-6" style="text-align: center;">

          <form id="myform" enctype="multipart/form-data"  method="POST" action="submit" target="results_iframe" onsubmit="wheelLoader(this)" 
            style="width: 20.2vw; max-width: 400px; min-width: 300px; height: 50px; margin-left: 0.8vw; border-radius: 5px; 
            background-image: url('static/img/uploadimg.png'); background-size: cover; background-position: center;
            margin-bottom: 20px; display: inline-block;">
              {% csrf_token %}
              <div class="input-group mb-3">
                <div class="custom-file">
                  <input type="file" class="custom-file-input" aria-describedby="inputGroupFileAddon01" onchange="testSize(this);" 
                  name="avatar" accept="image/gif, image/jpeg, image/png" style="cursor: pointer; " placeholder = "Choose File";>
                  <input id="number" type="hidden" name="repeat" value="0" />
                  <label for="inputGroupFile01"></label>
                </div>
              </div>
            </form>


          <img id="image-preview" src="{% static "img/default.jpg" %}" alt="Image preview" 
          style = "max-height: 512px;  
          width: 20.4vw;
          height: auto;
          max-width: 400px;
          margin-left: 0.8vw;
          min-width: 300px;"/>
          <img  id="image-loading" class="img-fluid image-overlay" src="{% static "img/wheelLoader.gif" %}" alt="Image Loading" style="position: absolute; left: 40%; top: 30%; max-height: 35vh; max-width: 16vw; visibility: hidden;"/>
        
        </div>


        <div class="col-md-8 col-xs-6 col-sm-push-6">
          <div style ="font-size: 32px; color:#00A69C; text-align:left; margin-left: 130px;" class="text-center text-md-left"> Results </div>
      
          <iframe class="border-0" name="results_iframe" onload="wheelLoaderHider()" src="results" 
          style = "
          height: 65vh;
          width: 85vw;
          background-size:cover;
          margin-left: 15px;
          align-content: right;
          ">
          Your browser does not support iframes.</iframe>
          <p id="url" hidden>{{gcs_url}}</p>

        </div>


        <div class="col-md-1"></div>


      </div>
    </div>




    <!-- START OF MOBILE HOME 
    <div style="text-align: center;">
      <img src="static/img/exploreM.png" width=85% height=auto style="display: block; margin-left: auto; margin-right: auto; z-index: 1; margin-top: 40px; margin-bottom: 40px;">
    </div>
    <div style="text-align: center;">
      <form id="myform" enctype="multipart/form-data"  method="POST" action="submit" target="results_iframe" onsubmit="wheelLoader(this)">
        {% csrf_token %}
          <button type="button" class="btn btn-primary btn-lg" 
          style="width: 50%; max-width: 400px; min-width: 200px; height: auto; margin-left: 20px; 
          margin-bottom: 20px; background-color: #00A69C; 
          border-color: #00A69C; font-family: 'Open Sans';"
          aria-describedby="inputGroupFileAddon01" onclick="testSize(this);" name="avatar" accept="image/gif, image/jpeg, image/png" style="cursor: pointer;"> Choose File 
          </button>
          <input id="number" type="hidden" name="repeat" value="0" />
      </form>
      <img id="image-preview" src="{% static "img/default.jpg" %}" alt="Image preview" 
          style = "max-height: 512px;  
          width: 80%;
          height: auto;
          max-width: 400px;
          margin-left: 0.8vw;
          min-width: 300px;"/>
          <img  id="image-loading" class="img-fluid image-overlay" src="{% static "img/wheelLoader.gif" %}" alt="Image Loading" style="position: absolute; left: 40%; top: 30%; max-height: 35vh; max-width: 16vw; visibility: hidden;"/>
      
      <div style ="font-size: 30px; font-weight: 50; color:#00A69C; text-align:left; margin-bottom: 20px; margin-top: 20px;" class="text-center text-md-left"> Results </div>
        <iframe class="border-0" name="results_iframe" onload="wheelLoaderHider()" src="results" 
        style = "
        max-height: 100%;
        width: 80%;
        align-content: right;">
        Your browser does not support iframes.</iframe>
        <p id="url" hidden>{{gcs_url}}</p>
    </div>
    -->
    


  
<!-- Previous footer
    <div class ="footer-info">
-->
    {% endblock %}
  </body>


  