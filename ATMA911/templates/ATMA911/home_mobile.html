{% extends "base_home.html" %}
{% load static %}
<head>
  {% block head %}
  <title>Project M</title>
  <link rel="icon" type="image/png" href="{% static "img/m-favicon.png" %}" />
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="cache-control" content="max-age=0" />
  <meta http-equiv="cache-control" content="no-cache" />
  <meta http-equiv="expires" content="0" />
  <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
  <meta http-equiv="pragma" content="no-cache" />
  <link rel="stylesheet" href="{% static "bootstrap-4.3.1/css/bootstrap.min.css" %}"/>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
  <script "{% static "bootstrap-4.3.1/js/bootstrap.min.js" %}"></script>
  <script type="text/javascript" src="{% static "js/homepage.js" %}"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="{% static "css/navbar.css"%}"/>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

  <!-- Styling for the the interaction page -->
  <style>

  /*iPhone X */
  @media only screen 
  and (min-device-width : 375px) 
  and (max-device-width : 812px)
  and (-webkit-device-pixel-ratio : 3){
    #results_iframe{
      width: 100vw;
    }
    #image-preview {
      margin-right: 50px;
    }

  }

  /*iPhone 4 */
  @media only screen 
  and (min-device-width : 320px) 
  and (max-device-width : 480px) {
    #results_iframe{
      width: 100vw;
    }
    #image-preview {
      margin-right: 50px;
    } 

  }

    {% comment %} .column {float: left;}
    .left {width: 44%;}
    .right {width: 56%;} {% endcomment %}
    .row:after {content: ""; display: table; clear: both;}
    @font-face {
      font-family: Open Sans;
      src: url(static/img/fonts/OpenSans-Regular.ttf);
    }

    #pop{
    position:absolute;
    top: 5%;
    left:20%;
    width: 361.01px;
    height: 999.8px;
    }
  #clos_button {
    top: 0%;
    right:0%;
    position:absolute;
    border: white 1px solid;
    background-color:white;
    padding-right: 10px;
    color: #828282;
    font-weight:300;
  }
    </style>
{% endblock %}
</head>

{% block content %}

    <div class="topnav" style="
    top:0;
    position:fixed;
    z-index:1;
    overflow: scroll;
    width: 100%;
    height: 45px;
    background-color: #00a69c;">
      <a class="navbar-brand" 
       {% comment %} style = "margin-left: 10px;" {% endcomment %}>
      <div class="text-center">
        <img src="{% static "img/m-logow.png" %}"  alt="Logo" style="width:100px; margin-bottom: 0px; margin-left:20px;">
      </div>
      </a>
      <!-- insert account name here
      <li class="nav-item " style="padding-right: 10px; color: white;"><h5>Account: 
      </h5></li>
      -->
      <!-- Insert redirect to login page -->
    
      <button type="submit" onclick= ""
        style="float: right; 
        margin-right: 20px; 
        font-family: 'Open Sans'; 
        color: white; 
        background-color:#00A69C; 
        border: #00A69C solid 1px;
        width: 80px;
        height: 33px;
        margin-top: 6px;
        ">Logout</button>
    
    </div>

    <div id="pop" class = "row justify-content-center" style="border: 2px solid #CCCCCC; background: #FFFFFF; border-radius: 5px; z-index: 4">
    <div style = "text-align:center;" class = "row justify-content-center" >
      <div style =" color: #4F4F4F; 
      padding-top:5%;
      margin-bottom:-30px;
      font-size: 24px; 
      font-weight: bold; 
      "> M image guidelines </div>
      <div style ="padding: 2%; 
      font-size: 18px; 
      width:100%;
      margin-bottom:-80px;
      ">Please upload a photo of <a style="font-weight:bold;">one person</a> with his/her <a style="font-weight:bold;">face visibly in the center</a>. The file should be under 2MB and in JPG or PNG format.</div>
    </div>
    <button id="clos_button">x</button>
    <div style ="width: 289.4px; height: 364.96px; background-color: red; margin-top:20%; padding-right:10%;">
      <img src="{% static "img/incorrect.png" %}"> 
    
    </div>
    <div style ="width: 289.4px; height: 364.96px; background-color: green; padding-right:10%;">
      <img src="{% static "img/correct.png" %}"> 
    
    </div>
  </div>
  

    <!--Start of Interaction-->

    <div style = "text-align: right;">
      <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
        <input type="hidden" name="cmd" value="_s-xclick" />
        <input type="hidden" name="hosted_button_id" value="L28KJ8ATCQJ84" />
        <button style="text-align: center; color: white; font-size: 18px; font-family: 'Open Sans', sans-serif; height: 40px; width: 128px; background: #E10078;
        border: 1px solid #FFFFFF;
        box-sizing: border-box;
        border-radius: 5px;
        margin-right: -5px;
        margin-top: 30px;"> Donate </button>
      </form>
    </div>

    <div id = "Interaction" 
    class= "container-fluid"
    style = "
    background-color: white;
    width: 85vw;">
    <br><br><br>
      <div 
      style= 
      "
      margin-left: 18%;
      font-size: 13vw;
      color: rgba(0, 0, 0, 0.7);
      text-align: center;
      font-weigth: 400;
      font-family: Open Sans;
      font-weight: 600;
      ">
        Explore
        <img src="/static/img/m-icon.png" alt="Logo" style="width: 40.38px; padding-bottom: 10px;">
        {% comment %} <h2 class="container-fluid"
        style="
        text-align: center;
        margin-top: 8vh;
        margin:0px;
        "> 
          <img src="static/img/exploreM.png" width=400px height=93.24px>
        </h2> {% endcomment %}
      </div>
      <br>

        <!-- Insert test function below -->
        <!--
        <button name="M_result" type="M_result" value="M_result" onclick="testSize(this)"
        style = "min-width: 150px;
        min-height: 40px;
        width: 17.26vw;
        height: 5.555vh;
        max-width: 250px;
        max-height: 50px;
        margin-left: 15px;
        font-family: Open Sans;
        font-size: 20px;
        color: white;
        background-color: #00A69C;
        border: 1px solid #00A69C;
        border-radius: 1px;">
        M RESULT
        </button>
      </div>
      -->
      <div >
      <input type="file" id="file" style="display:none;" />
            <button id="button" name="button" value="Upload" onclick="upload();"
            style = "
            width: 250px;
            height: 50px;
            font-family: Open Sans;
            font-size: 20px;
            color: white;
            margin-right: 100px;
            background-color: #00A69C;
            border: 1px solid #00A69C;
            border-radius: 4px;
            margin-bottom: 50px;">
            UPLOAD IMG </button>
            <!-- 2MB FILE UPLOAD RESTRICTION (RELOCATE) -->
            <script>
              function upload() {
                var uploadField = document.getElementById("file");
                uploadField.onchange = function() {
                  if(this.files[0].size > 2097152){
                    alert("File size must be under 2MB.");
                    this.value = "";
                  };
                };
                uploadField.click();
              };
            </script>
            <br>
      </div>
      

      <div class= "row" style = "margin-top: 0vh; height: 1100px;">   
        <div class="col-md-4 col-md-push-10" id ="loading_pic"style="text-align: center;">
          <img id="image-preview" src="{% static "img/default.jpg" %}" alt="Image preview" 
          style = "max-height: 512px;  
          {% comment %} width: 23.4vw; {% endcomment %}
          height: auto;
          max-width: 400px;
          margin-left: 0vw;
          min-width: 300px;
          "/>
          <img  id="image-loading" class="img-fluid image-overlay" src="{% static "img/wheelLoader.gif" %}" alt="Image Loading" style="position: absolute; left: 40%; top: 30%; max-height: 35vh; max-width: 16vw; visibility: hidden;"/>
          <iframe class="border-0" id= "results_iframe" name="results_iframe" onload="wheelLoaderHider()" src="results" 
          style = "
          height: 800px;
          {% comment %} width: 100vw; {% endcomment %}
          padding-top: 50px;
          {% comment %} background-color: pink; {% endcomment %}
          ">
          Your browser does not support iframes.</iframe>
          <p id="url" hidden>{{gcs_url}}</p>
        </div>
        {% comment %} <div class=" col-md-8 col-md-pull-6" id = "graphs"style="text-align: center;">          
        </div> {% endcomment %}

      </div>

      <br>

    </div>

    <p></p>
    {% endblock %}
  </body>
